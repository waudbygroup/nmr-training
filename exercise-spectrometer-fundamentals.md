---
title: Spectrometer Fundamentals
layout: default
nav_order: 3
parent: Exercises
---

# Spectrometer Fundamentals
{: .no_toc }

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

## Introduction

Adapted from the [EMBO Practical course on structure determination by NMR](https://users.cs.duke.edu/~brd/Teaching/Bio/asmb/Papers/NMR/Introduction-reviews/Blackledge/sprangers_practical.pdf).

## Pulse programs

An important skill is to be able to examine and understand pulse programs. This does not necessarily mean to understand the complete details of the sequence design, but a knowledgeable user should be able to examine a pulse program to determine parameters that may be required for its setup.

Bruker pulse programs are plain text files, and have a simple basic syntax. The pulse program is executed line by line, and when a line is finished the program continues on the next line. When two commands are written on one line they start both at the beginning. The line lasts as long as the longest command on that line.

Lines beginning with a semicolon `;` are comments - they are ignored by the spectrometer, but can provide useful information about parameters, and note on how the sequence operates.

Pulse programs use a rather concise syntax to express pulses, power levels, delays and so forth. It's important to be able to recognise what these symbols mean, and the physical units that they are expressed in. A brief guide to the most important of these is provided in the rest of this document.

## Channels

NMR spectrometers are capable of pulsing on or acquiring signals from a variety of different nuclei. Each nucleus used in an experiment must be associated with a channel -- a path from the signal generator and transmitter through an amplifier to the coil, and from the coil through a pre-amplifier and amplifier to the receiver.

Channels are labelled `f1`, `f2` and so on. There are typically four channels on spectrometers used for biomolecular NMR (`f1`, `f2`, `f3` and `f4`):

| channel | nucleus |
|:--------|:--------|
| f1      | proton (1H) |
| f2      | carbon (13C) |
| f3      | nitrogen (15N) |
| f4      | deuterium (2H) |

However, this may not always be the case, for example, f1 may also be used for fluorine (19F) on some spectrometers.

The amplifier setup and arrangement of channels can be checked using the `edasp` command in Topspin.

{: .note }
> It's good practise to check the amplifier setup before tuning and matching, because these are the channels that will be available. Only make changes if you know what you're doing though! 

## Offsets

Each channel on the spectrometer has an associated frequency. For example, on a 600 MHz spectrometer, the proton channel would have a frequency of about 600 MHz, the carbon-13 channel a frequency around 150 MHz, and nitrogen-15 channel a frequency around 60 MHz. These are often referred to as **base frequencies** and are denoted `bf1`, `bf2` etc. for channels f1, f2, etc. They are not configurable by the user, but correspond to an chemical shift of **zero ppm** (based on referencing to the solvent, not to internal standards like DSS or TMS).

{: .note }
> When you lock onto a solvent, the spectrometer automatically adjusts the B0 field strength (LOCK FIELD) so that the solvent appears at the expected chemical shift (e.g. 4.7 ppm for H2O/D2O or D2O) relative to the base frequency.

When setting up an experiment, one usually wants to set the centre of the spectrum -- the transmitter frequency -- to a chemical shift other than zero ppm (i.e. different to the base frequency). There are three reasons for this:

1. (For the 1H channel only) Placing the solvent signal in the center of the spectrum (i.e. so it is on-resonance with the transmitter frequency) is usually required for solvent suppression experiments
2. By placing the center of the spectrum in the middle of the signals being observed, you can reduce the spectrum width that has to be acquired. This can speed up recording times for 2D experiments and increase sensitivity
3. Placing the transmitter near the center of signals being observed reduces *off-resonance effects* -- imperfections that result when signals are a large distance from the transmitter frequency

We can define the center of the spectrum by an **offset** relative to the base frequency. These are referred to as `o1`, `o2`, `o3` etc. and are specified in Hz. Equivalently, you can define them as chemical shifts (ppm) through the parameters `o1p`, `o2p`, `o3p` etc.

The combination of offset and base frequency defines the actual spectrometer frequencies generated by the transmitter for each nucleus. These are denoted by `sfo1`, `sfo2`, `sfo3` etc.

To summarise:

| Term | Description | Units |
|:---|:---|:---|
| bf1, bf2, bf3 | Base frequencies (0 ppm) | MHz |
| o1, o2, o3 | Offsets  | Hz |
| o1p, o2p, o3p | Offsets  | ppm |
| sfo1, sfo2, sfo3 | Actual transmitter frequencies (BF + offset) | MHz |


## Pulses

Pulses (specifically, pulse lengths) are represented by the parameters `p0` to `p31`. They are stored in units of **microseconds (us)**, but you can input values in ms or s by following numbers with 'm' or 's'. Be careful if doing this though, because long pulses can only be safely applied at low power levels.

By convention, some parameters are commonly used for different types of pulses on different nuclei:

| Symbol | Description |
|:---|:---|
|`p1` | 1H 90 degree hard pulse |
|`p2` | 1H 180 degree hard pulse |
|`p3` | 13C 90 degree hard pulse |
|`p4` | 13C 180 degree hard pulse |
|`p21` | 15N 90 degree hard pulse |
|`p22` | 15N 180 degree hard pulse |
|`p16` and `p19` | Gradient pulses |

You can check and edit pulse lengths in the `ased` acquisition parameter editor, or by typing their symbol directly from the command line.

{: .warning }
> There are no safety checks on pulse lengths! It is possible to cause serious damage to the probe by using a pulse that's too long for the given power level.
> Always double check you haven't made a typo when you enter a new pulse length, and be aware of units. If in doubt, check with an experienced user.

## Power levels

## Delays

Delays are represented by the parameters `d0` to `d31`. They are stored as **seconds (s)**.

By convention, some parameters are commonly used for different types of delay:

| Symbol | Description |
|:---|:---|
|`d1` | Recycle delay = time between scans |


You can check and edit delays in the `ased` acquisition parameter editor, or by typing their symbol directly from the command line.

{: .important }
> Delays are specified in seconds, while pulses are specified in microseconds -- take care that this doesn't cause confusion or mistakes.


## Shaped pulses

## Gradients

## Scans, dummy scans and receiver gain

## Prosol
